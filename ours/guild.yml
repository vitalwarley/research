- model: sota
  operations:
    sota2020:
      description: Sample training script
      main: train_fc
      sourcecode:
        - dataset.py
        - model.py
        - mytypes.py
        - train_fc.py
        - transforms.py
        - utils.py
      flags-import: all
      flags-dest: args
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: ../fitw2020/
          target-type: link
        - file: insightface
        - file: models/
          target-type: link

    sota2021:
      description: Sample training script
      main: train_kv
      sourcecode:
        - dataset.py
        - model.py
        - mytypes.py
        - train_kv.py
        - utils.py
      flags-import: all
      flags-dest: args
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: models
          target-type: link
        - file: runs
          target-type: link
        - file: ../rfiw2021/
          target-type: link
        - file: insightface

- model: mtcf
  operations:
    train:
      description: Reproduction of Hörmann et al. (2020)
      main: tasks.mtcf train
      sourcecode:
        - utils.py
        - models/mtcf.py
        - datasets/mtcf.py
        - datasets/utils.py
        - tasks/mtcf.py
      flags-import: all
      flags-dest: args
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: weights
          target-type: link
        - file: ../rfiw2021/
          target-type: link
        - file: models/insightface
          rename: models/insightface
          target-type: link
    val:
      description: Reproduction of Hörmann et al. (2020)
      main: tasks.mtcf val
      sourcecode:
        - utils.py
        - models/mtcf.py
        - datasets/mtcf.py
        - datasets/utils.py
        - tasks/mtcf.py
      flags-import: all
      flags-dest: args
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: weights
          target-type: link
        - file: ../rfiw2021/
          target-type: link
        - file: models/insightface
          rename: models/insightface
          target-type: link
        - operation: mtcf
          select: exp
    test:
      description: Reproduction of Hörmann et al. (2020)
      main: tasks.mtcf test
      sourcecode:
        - utils.py
        - models/mtcf.py
        - datasets/mtcf.py
        - datasets/utils.py
        - tasks/mtcf.py
      flags-import: all
      flags-dest: args
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: weights
          target-type: link
        - file: ../rfiw2021/
          target-type: link
        - file: models/insightface
          rename: models/insightface
          target-type: link
        - operation: mtcf
          select: exp

- model: facornet
  operations:
    train:
      description: Reproduction of Kinship Representation Learning with Face Componential Relation (2023)
      exec: python tasks/facornet.py fit --config facornet.yml
      sourcecode:
        - utils.py
        - losses.py
        - models/facornet.py
        - datasets/fiw.py
        - datasets/facornet.py
        - datasets/utils.py
        - tasks/facornet.py
      flags-import: all
      flags-dest: config:configs/facornet.yml
      output-scalars: '(\key)=(\value)'
      requires:
        - file: weights
          target-type: link
        - file: ../datasets/
          target-type: link
          rename: data
        - file: configs/facornet.yml
          target-type: link
    val:
      description: Reproduction of Kinship Representation Learning with Face Componential Relation (2023)
      exec: python tasks/facornet.py validate --config facornet.yml
      sourcecode:
        - utils.py
        - losses.py
        - models/facornet.py
        - datasets/fiw.py
        - datasets/facornet.py
        - datasets/utils.py
        - tasks/facornet.py
      flags-import: all
      flags-dest: config:configs/facornet.yml
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: weights
          target-type: link
        - file: ../datasets/
          target-type: link
          rename: data
        - file: configs/facornet.yml
          target-type: link
        - operation: facornet:train
          select: exp/checkpoints/.*\.(\d+)\.ckpt
          rename: exp/checkpoints/best.ckpt
    test:
      description: Reproduction of Kinship Representation Learning with Face Componential Relation (2023)
      exec: python tasks/facornet.py test --config facornet.yml
      sourcecode:
        - utils.py
        - losses.py
        - models/facornet.py
        - datasets/fiw.py
        - datasets/facornet.py
        - datasets/utils.py
        - tasks/facornet.py
      flags-import: all
      flags-dest: config:configs/facornet.yml
      output-scalars: '(\key):\s+(\value)'
      requires:
        - file: weights
          target-type: link
        - file: ../datasets/
          target-type: link
          rename: data
        - operation: facornet:train
          select: exp/checkpoints/.*\.(\d+)\.ckpt
          rename: exp/checkpoints/best.ckpt
